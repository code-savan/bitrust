<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabase-client.js"></script>
</head>
<body>
    <h1>Welcome to your Dashboard</h1>
    <div id="user-info"></div>
    <button onclick="signOut()">Sign Out</button>

    <script>
    async function loadUserData() {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) {
            window.location.href = 'signin.html';
            return;
        }

        const { data, error } = await supabase
            .from('profiles')
            .select('*')
            .eq('email', user.email)
            .single();

        if (error) {
            console.error('Error loading user data:', error);
            return;
        }

        document.getElementById('user-info').innerHTML = `
            <p>Name: ${data.name}</p>
            <p>Email: ${data.email}</p>
            <p>Balance: $${data.available_balance}</p>
            <p>Account Type: ${data.account_type}</p>
            <p>Level: ${data.level}</p>
        `;
    }

    async function signOut() {
        await supabase.auth.signOut();
        window.location.href = 'signin.html';
    }

    loadUserData();
    </script>
</body>
</html>
